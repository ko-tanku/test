<<<<<<< HEAD
# プロジェクト設計思想書 (Project Blueprint) - 2025年8月26日改訂版
=======
# プロジェクト設計思想書 (Project Blueprint)
>>>>>>> dbde2096846e5b4398413351225cc5f784d336f1

## 0. はじめに

このドキュメントは、学習資料自動生成プラットフォームの「あるべき姿」を定義する最上位の設計思想書（憲法）です。
<<<<<<< HEAD
プロジェクトに関わる全てのドキュメント、コード、そしてAIによる開発支援は、この設計思想書に準拠します。目的は、プロジェクトの方向性の一貫性を保ち、仕様の曖昧さを排除し、拡張性と保守性の高いシステムを構築することです。

### 改訂履歴
- **2025年8月26日**: 基盤安定化（Phase 1）完了を受け、現在の実装状況と将来展望を反映した改訂版を作成
=======
プロジェクトに関わる全てのドキュメント、コード、そしてAI（Gemini）による開発支援は、この設計思想書に準拠します。目的は、プロジェクトの方向性の一貫性を保ち、仕様の曖昧さを排除し、拡張性と保守性の高いシステムを構築することです。
>>>>>>> dbde2096846e5b4398413351225cc5f784d336f1

---

## 1. プロジェクトの基本理念

### 1.1. 目的とゴール

- **最終目的:** 高品質なWeb学習資料を、効率的かつ一貫して作成するための自動生成プラットフォームを構築する。
- **目標:**
    - 30種類以上の多様な教材に対応可能な、スケーラブルな基盤を実現する。
    - 学習者が「自分の言葉で他者に説明できる」レベルまで深く理解できる、効果的な学習体験を提供する。
    - 開発プロセスを標準化し、コンテンツ作成者とシステム開発者の協業を円滑にする。

### 1.2. 対象読者と学習体験

- **メインターゲット:** プログラミング未経験の文系大学生（組込制御技術者志望）。
- **提供する体験:**
    - 豊富なビジュアル要素（図、グラフ、アニメーション）とインタラクティブ機能（クイズ、演習）により、複雑な概念の直感的な理解を促す。
    - 既習内容を前提とした累積的な知識構築をサポートし、手戻りのない効率的な学習パスを提供する。

---

## 2. システムアーキテクチャ

### 2.1. 基本方針 (三大原則)

1.  **YAML駆動 (YAML-Driven):**
    - 学習コンテンツの構造、データ、設定は、人間が読み書きしやすいYAMLファイルで一元管理する。ロジックとデータを完全に分離する。
2.  **関心の分離 (Separation of Concerns):**
    - **データ層 (`content/*.yml`):** コンテンツのデータに責任を持つ。
    - **ロジック層 (`contents.py`):** データとCore機能を連携させ、コンテンツを組み立てる司令塔の役割を担う。
    - **見た目層 (`templates/*.jinja`):** 教材固有のCSSやJSなど、最終的な見た目の調整に責任を持つ。
    - **Core機能層 (`src/core`):** プロジェクト全体で共通の、汎用的な処理に責任を持つ。
3.  **Core機能への集約 (Core-Centric):**
    - Markdown生成、グラフ作成、ファイル操作などの汎用的な機能は、全て`src/core`に集約する。これにより、機能の再利用性を最大化し、保守性を高める。

### 2.2. UI/UX設計原則

- **UIによる学習タスクのガイド:**
    - インタラクティブ機能は、学習者に発見されにくい隠れた操作を要求するべきではない。UI自体が、学習者に期待される行動（例: 比較、選択、分類）を直感的に理解できるよう設計されるべきである。
- **インタラクションの質的転換と拡充:**
    - この原則に基づき、Plotly標準のズーム機能のような分かりにくいインタラクションは採用しない。
    - 代わりに、ユーザーが提案した「タブによる状態比較」のように、UIが学習タスクを明確にガイドする、高品質で分かりやすいインタラクティブ機能を積極的に開発・拡張していくことを目指す。

### 2.2. ディレクトリ構造

```
my-project/
├── docs/                  # 自動生成されたサイトコンテンツ（直接編集しない）
├── src/
│   ├── core/              # プラットフォームの共通コア機能
│   ├── materials/           # 各教材の個別実装
│   │   └── [material_name]/
│   │       ├── main.py        # 教材生成のエントリーポイント
│   │       ├── contents.py    # コンテンツ生成の司令塔
│   │       ├── content/       # データ層 (YAML)
│   │       ├── templates/     # 見た目層 (Jinja2)
│   │       └── generators/    # 教材固有の独自ロジック
│   └── learning_objects/    # 教材横断で再利用されるコンテンツ部品
├── tests/                 # 自動テストコード
├── documents/             # プロジェクトの仕様書・設計書
│   └── PROJECT_BLUEPRINT.md # ★このドキュメント
└── mkdocs.yml             # MkDocs設定ファイル（main.py経由で自動生成）
```

### 2.3. 主要技術スタック

- **静的サイトジェネレータ:** MkDocs (Material for MkDocsテーマ)
- **自動生成フレームワーク:** Python
- **データ形式:** YAML
- **テンプレートエンジン:** Jinja2
- **テストフレームワーク:** pytest

---

## 3. 理想の開発フロー

1.  **Step 1: 対話による「学習資料設計書」の生成**
    - AIがユーザー（コンテンツ設計者）と対話し、`学習資料要件.md`に基づき、学習内容、構成、使用コンポーネントを定義したMarkdown形式の「学習資料設計書」を生成する。

2.  **Step 2: 設計書からのファイル群の自動生成**
    - AIが「学習資料設計書」と「スクリプト生成仕様.md」に基づき、教材を構成する全てのファイル群（`main.py`, `contents.py`, `content/*.yml`等）を`src/materials/[material_name]/`配下に自動生成する。

3.  **Step 3: ビルドと確認**
    - 自動生成された`main.py`を実行し、`docs/`配下に最終的なサイトコンテンツを生成する。
    - `mkdocs serve`コマンドでローカルサーバーを起動し、表示や動作を最終確認する。

---

## 4. Coreフレームワーク仕様

### 4.1. 主要モジュールと責務

- **`DocumentBuilder`:** Markdownの基本要素およびリッチコンポーネント（注釈、タブ等）を生成する。
- **`ChartGenerator`, `TableGenerator`:** YAMLデータからグラフやテーブルのHTMLを生成する。
- **`ContentManager`:** `content/`のYAMLを解釈し、`DocumentBuilder`等を呼び出して章ページを組み立てる。
- **`KnowledgeManager`:** 教材内の用語集(Glossary)、FAQ、TIPSなど、横断的な知識ページを生成する。
- **`AssetGenerator`:** サイト全体で使用するCSSやJavaScriptファイルを管理・生成する。
- **`MkDocsManager`:** `mkdocs.yml`を動的に生成・管理する。
- **`PlatformBuilder`:** 複数教材を横断する機能（総合用語集、ラーニングパス）を提供する。

### 4.2. ナレッジ管理仕様 (`KnowledgeManager`)

教材横断的な情報（用語、FAQ、TIPS）は、`content/terms.yml`等のファイルで一元管理する。

- **用語 (Term):**
    - `term` (String, 必須): 用語名。
    - `definition` (String, 必須): 用語の定義文。
    - `category` (String, 必須):
        - **目的:** 用語集ページで、カテゴリ別に見出しを付けて用語を整理・表示するために使用する。
        - **値の規約:** `学習内容基礎編.md`の「中分類」に準ずる値を推奨する（例: 「ハードウェア基礎」「プログラミング技法」「通信」など）。これにより、学習カリキュラムと用語集の分類に一貫性を持たせる。

- **FAQ:**
    - `question` (String, 必須): 質問文。
    - `answer` (String, 必須): 回答文。
    - `category` (String, 任意): FAQを分類するためのカテゴリ。

- **TIPS:**
    - `title` (String, 必須): ヒントのタイトル。
    - `content` (String, 必須): ヒントの内容。
    - `category` (String, 任意): TIPSを分類するためのカテゴリ。

### 4.3. コンテンツブロック仕様

各章のコンテンツは、`core実装機能一覧.md`で定義されたYAMLの`type`ブロックの組み合わせで表現する。

### 4.4. 拡張ポイント

Core機能でカバーできない教材固有の要件は、`src/materials/[material_name]/generators/`配下に独自のPythonロジックを実装し、`contents.py`から`type: custom_generator`で呼び出すことで対応する。

---

## 5. 品質保証

- **自動テスト:** `pytest`を利用し、`src/core`の各モジュールに対するユニットテストと、教材生成プロセス全体を通す統合テストを整備・維持する。コードのマージ前には、全てのテストがパスすることを必須条件とする。
- **ドキュメント:** プロジェクトの仕様や設計に変更があった場合は、関連する全てのドキュメント（本紙、`core実装機能一覧.md`等）を必ず更新し、コードとドキュメントの同期を保つ。
